<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title></title>
    <script src="js/mui.min.js"></script>
    <link href="css/mui.min.css" rel="stylesheet"/>
    <script type="text/javascript" charset="utf-8">
      	mui.init();
    </script>
	<style>
		#preview img{width: 100%;}
	</style>
</head>
<body>
	<h1>Hybrid真机调试</h1>
	<button id="btnCamera">摄像头</button>
	<div id="preview">
		
	</div>
	<script>
		// DCloud平台下的h5+给我们提供了一个全局对象plus，所有的硬件接口都放在这个对象下面
		btnCamera.onclick = function(){
			// 调用硬件接口
			
			// 获取摄像头（主摄像头）
			const cmr = plus.camera.getCamera();
			
			// 拍照
			cmr.captureImage(function(path){
				console.log('path=',path)
				
				// path路径为临时路径，要显示，必须转成绝对路径
				let realPath = plus.io.convertLocalFileSystemURL(path);
				console.log('realPath=',realPath)
				
				let img = new Image();
				img.src = realPath;
				preview.appendChild(img);
				
				// 保存到相册
				plus.gallery.save(path,()=>{
					console.log('保存到相册')
					})
			})
		}
		
	</script>
</body>
</html>